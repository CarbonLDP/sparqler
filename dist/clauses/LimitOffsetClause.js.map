{"version":3,"sources":["clauses/LimitOffsetClause.ts"],"names":[],"mappings":";;AACA,2CAA0C;AAM1C,6CAA4C;AAC5C,+CAA8C;AAC9C,+CAA8C;AAkC9C,0BAAsF,aAAqD;IAC1I,IAAM,mBAAmB,GAAyD,2BAAY;SAC5F,UAAU,CAAC,IAAI,CAAE,IAAI,EAAE,aAAa,CAAE,CAAC;IAEzC,OAAO,UAAE,UAAU,EAAE,OAAO,IAAM,OAAA,yBAAW;SAC3C,UAAU,CAAE,iBAAO,CAAC,UAAU,CAAE,mBAAmB,EAAE,aAAa,CAAE,EAAE,UAAU,EAAE,OAAO,CAAE,EAD3D,CAC2D,CAAC;AAC/F,CAAC;AAED,2BAAuF,aAAqD;IAC3I,IAAM,kBAAkB,GAAwD,yBAAW;SACzF,UAAU,CAAC,IAAI,CAAE,IAAI,EAAE,aAAa,CAAE,CAAC;IAEzC,OAAO,UAAE,UAAU,EAAE,OAAO,IAAM,OAAA,2BAAY;SAC5C,UAAU,CAAE,iBAAO,CAAC,UAAU,CAAE,aAAa,EAAE,kBAAkB,CAAE,EAAE,UAAU,EAAE,OAAO,CAAE,EAD1D,CAC0D,CAAC;AAC9F,CAAC;AAKY,QAAA,iBAAiB,GAAG;IAChC,UAAU,EAAV,UAAyG,cAA4B,EAAE,SAAW,EAAE,MAAQ;QAC3J,IAAM,aAAa,GAA+B,2BAAY;aAC5D,UAAU,CAAC,IAAI,CAAE,IAAI,EAAE,cAAc,CAAE,CAAC;QAE1C,IAAM,uBAAuB,GAAG,iBAAO,CAAC,UAAU,CAAE,cAAc,EAAE,aAAa,CAAE,CAAC;QAEpF,OAAO,iBAAO,CAAC,UAAU,CACxB,gBAAgB,CAAQ,uBAAuB,CAAE,EACjD,iBAAiB,CAAQ,uBAAuB,CAAE,EAClD,aAAa,CACb,CAAE,SAAS,EAAE,MAAM,CAAE,CAAC;IACxB,CAAC;CACD,CAAC","file":"LimitOffsetClause.js","sourcesContent":["import { Container2 } from \"../data/Container2\";\nimport { Factory } from \"../data/Factory\";\n\nimport { QueryToken } from \"../tokens/QueryToken\";\nimport { SubSelectToken } from \"../tokens/SubSelectToken\";\n\nimport { FinishClause } from \"./FinishClause\";\nimport { LimitClause } from \"./LimitClause\";\nimport { OffsetClause } from \"./OffsetClause\";\nimport { ValuesClause } from \"./ValuesClause\";\n\n\n/**\n * This LimitOffsetClause created this way to be able to specify `limit` and `offset` in this order or viceversa,\n * but not be able to repeat `limit` or `offset` more that once.\n *\n * Example:\n *  - Correct:\n *      .limit( ... )\n *      .offset( ... )\n *      .execute();\n *\n *      .offset( ... )\n *      .limit( ... )\n *      .execute();\n *\n *      .limit( ... )\n *      .execute();\n *\n *  - Incorrect:\n *      .limit( ... )\n *      .limit( ... ) // Not possible\n *      .offset( ... )\n *\n *      .offset( ... )\n *      .limit( ... )\n *      .offset( ... ) // Not possible\n */\nexport interface LimitOffsetClause<T extends FinishClause> extends LimitClause<OffsetClause<ValuesClause<T> & T> & ValuesClause<T> & T>,\n                                                                                         OffsetClause<LimitClause<ValuesClause<T> & T> & ValuesClause<T> & T>,\n                                                                                         ValuesClause<T> {}\n\n\nfunction _getLimitFactory<CONTAINER extends Container2<any>, T extends FinishClause>( valuesFactory:Factory<CONTAINER, ValuesClause<T> & T> ):Factory<CONTAINER, LimitClause<OffsetClause<ValuesClause<T> & T> & ValuesClause<T> & T>> {\n\tconst offsetValuesFactory:Factory<CONTAINER, OffsetClause<ValuesClause<T> & T>> = OffsetClause\n\t\t.createFrom.bind( null, valuesFactory );\n\n\treturn ( container1, object1 ) => LimitClause\n\t\t.createFrom( Factory.createFrom( offsetValuesFactory, valuesFactory ), container1, object1 );\n}\n\nfunction _getOffsetFactory<CONTAINER extends Container2<any>, T extends FinishClause>( valuesFactory:Factory<CONTAINER, ValuesClause<T> & T> ):Factory<CONTAINER, OffsetClause<LimitClause<ValuesClause<T> & T> & ValuesClause<T> & T>> {\n\tconst limitValuesFactory:Factory<CONTAINER, LimitClause<ValuesClause<T> & T>> = LimitClause\n\t\t.createFrom.bind( null, valuesFactory );\n\n\treturn ( container1, object1 ) => OffsetClause\n\t\t.createFrom( Factory.createFrom( valuesFactory, limitValuesFactory ), container1, object1 );\n}\n\n/**\n * @todo\n */\nexport const LimitOffsetClause = {\n\tcreateFrom<C extends Container2<QueryToken | SubSelectToken>, T extends FinishClause, O extends object>( genericFactory:Factory<C, T>, container:C, object:O ):O & LimitOffsetClause<T> {\n\t\tconst valuesFactory:Factory<C, ValuesClause<T>> = ValuesClause\n\t\t\t.createFrom.bind( null, genericFactory );\n\n\t\tconst genericAndValuesFactory = Factory.createFrom( genericFactory, valuesFactory );\n\n\t\treturn Factory.createFrom(\n\t\t\t_getLimitFactory<C, T>( genericAndValuesFactory ),\n\t\t\t_getOffsetFactory<C, T>( genericAndValuesFactory ),\n\t\t\tvaluesFactory\n\t\t)( container, object );\n\t},\n};\n"]}