{"version":3,"sources":["patterns/notTriplePatterns/SingleValuesPattern.ts"],"names":[],"mappings":";;AACA,0CAAgD;AAUhD,kCAAwC;AAExC,uDAAsD;AA2BtD,SAAS,QAAQ,CAAoC,SAAW;IAC/D,OAAO,UAAA,KAAK;QACX,IAAM,MAAM,GAAG,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QACpD,IAAI,CAAE,MAAM,CAAC,MAAM;YAAG,MAAM,CAAC,IAAI,CAAE,EAAE,CAAE,CAAC;QACxC,MAAM,CAAE,CAAC,CAAE,GAAG,MAAM,CAAE,CAAC,CAAE,CAAC,MAAM,CAAE,oBAAY,CAAE,KAA6B,CAAE,CAAE,CAAC;QAElF,IAAM,WAAW,GAAG,oBAAY,CAAE,SAAS,CAAC,WAAW,EAAE,EAAE,MAAM,QAAA,EAAE,CAAE,CAAC;QACtE,IAAM,YAAY,GAAG,oBAAY,CAAE,SAAS,EAAE,EAAE,WAAW,aAAA,EAAgB,CAAE,CAAC;QAE9E,OAAO,+BAAuB,CAAC,UAAU,CAAE,YAAY,EAAE,EAAE,CAAE,CAAC;IAC/D,CAAC,CAAC;AACH,CAAC;AAMY,QAAA,mBAAmB,GAc5B;IACH,UAAU,EAAV,UAAgE,SAAW,EAAE,MAAQ;QACpF,OAAO,mCAAgB,CAAC,UAAU,CAAE,SAAS,EAAE,MAAM,CAAC,MAAM,CAAE,MAAM,EAAE;YACrE,GAAG,EAAE,QAAQ,CAAE,SAAS,CAAE;SAC1B,CAAE,CAAE,CAAC;IACP,CAAC;CACD,CAAC;AAKW,QAAA,uBAAuB,GAchC;IACH,UAAU,EAAV,UAAgE,SAAW,EAAE,MAAQ;QACpF,OAAO,mCAAgB,CAAC,UAAU,CAAE,SAAS,EAAE,MAAM,CAAC,MAAM,CAAE,MAAM,EAAE;YACrE,GAAG,EAAE,QAAQ,CAAE,SAAS,CAAE;SAC1B,CAAE,CAAE,CAAC;IACP,CAAC;CACD,CAAC","file":"SingleValuesPattern.js","sourcesContent":["import { Container } from \"../../data/Container\";\nimport { cloneElement } from \"../../data/utils\";\n\nimport { ValuesToken } from \"../../tokens/ValuesToken\";\n\nimport { SupportedNativeTypes } from \"../SupportedNativeTypes\";\n\nimport { Literal } from \"../triplePatterns/Literal\";\nimport { Resource } from \"../triplePatterns/Resource\";\n\nimport { Undefined } from \"../Undefined\";\nimport { convertValue } from \"../utils\";\n\nimport { NotTriplePattern } from \"./NotTriplePattern\";\n\n\n/**\n * Wrapper for easier usage of SPARQL VALUES patterns that have\n * a single variable.\n */\nexport interface SingleValuesPattern extends NotTriplePattern<ValuesToken> {\n\thas( value:SupportedNativeTypes | Resource | Literal | Undefined ):SingleValuesPatternMore;\n}\n\n/**\n * Wrapper for add more values to a {@link SingleValuesPattern}.\n */\nexport interface SingleValuesPatternMore extends NotTriplePattern<ValuesToken> {\n\tand( value:SupportedNativeTypes | Resource | Literal | Undefined ):SingleValuesPatternMore;\n}\n\n\n/**\n * Function that creates a generic {@link SingleValuesPattern.has} function.\n * This function is used also for declaring {@link SingleValuesPatternMore.and}\n *\n * @param container The container with the query data for the statement.\n *\n * @private\n */\nfunction getHasFn<C extends Container<ValuesToken>>( container:C ):SingleValuesPattern[ \"has\" ] {\n\treturn value => {\n\t\tconst values = container.targetToken.values.slice();\n\t\tif( ! values.length ) values.push( [] );\n\t\tvalues[ 0 ] = values[ 0 ].concat( convertValue( value as SupportedNativeTypes ) );\n\n\t\tconst targetToken = cloneElement( container.targetToken, { values } );\n\t\tconst newContainer = cloneElement( container, { targetToken } as Partial<C> );\n\n\t\treturn SingleValuesPatternMore.createFrom( newContainer, {} );\n\t};\n}\n\n\n/**\n * Constant with utils for {@link SingleValuesPattern} objects.\n */\nexport const SingleValuesPattern:{\n\t/**\n\t * Factory function that allows to crete a {@link SingleValuesPattern}\n\t * from the {@param object} provided.\n\t *\n\t * @param container The related container with the data for the\n\t * {@link SingleValuesPattern} statement.\n\t * @param object The base base from where to create the\n\t * {@link SingleValuesPattern} statement.\n\t *\n\t * @return The {@link SingleValuesPattern} statement created from the\n\t * {@param object} provided.\n\t */\n\tcreateFrom<C extends Container<ValuesToken>, O extends object>( container:C, object:O ):SingleValuesPattern;\n} = {\n\tcreateFrom<C extends Container<ValuesToken>, O extends object>( container:C, object:O ):SingleValuesPattern {\n\t\treturn NotTriplePattern.createFrom( container, Object.assign( object, {\n\t\t\thas: getHasFn( container ),\n\t\t} ) );\n\t},\n};\n\n/**\n * Constant with utils for {@link SingleValuesPatternMore} objects.\n */\nexport const SingleValuesPatternMore:{\n\t/**\n\t * Factory function that allows to crete a {@link SingleValuesPatternMore}\n\t * from the {@param object} provided.\n\t *\n\t * @param container The related container with the data for the\n\t * {@link SingleValuesPatternMore} statement.\n\t * @param object The base base from where to create the\n\t * {@link SingleValuesPatternMore} statement.\n\t *\n\t * @return The {@link SingleValuesPatternMore} statement created from the\n\t * {@param object} provided.\n\t */\n\tcreateFrom<C extends Container<ValuesToken>, O extends object>( container:C, object:O ):SingleValuesPatternMore;\n} = {\n\tcreateFrom<C extends Container<ValuesToken>, O extends object>( container:C, object:O ):SingleValuesPatternMore {\n\t\treturn NotTriplePattern.createFrom( container, Object.assign( object, {\n\t\t\tand: getHasFn( container ),\n\t\t} ) );\n\t},\n};\n"]}